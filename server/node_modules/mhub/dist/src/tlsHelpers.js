"use strict";
/**
 * TLS helpers.
 */
Object.defineProperty(exports, "__esModule", { value: true });
const fs = require("fs");
const path = require("path");
function convertToBuffer(value, rootDir) {
    // Some options accept an array of keys/certs etc
    if (Array.isArray(value)) {
        return value.map((element) => convertToBuffer(element, rootDir));
    }
    if (typeof value !== "string") {
        // Pass through Buffer / UInt8Array as-is
        return value;
    }
    // Read filename, convert to file contents
    return fs.readFileSync(path.resolve(rootDir, value));
}
/// Convert filenames to the contents of these files
function replaceKeyFiles(options, rootDir) {
    // tslint:disable-next-line:array-type
    ["pfx", "key", "cert", "crl", "ca", "dhparam", "ticketKeys"]
        .forEach((propName) => {
        if (options[propName]) {
            options[propName] = convertToBuffer(options[propName], rootDir);
        }
    });
}
exports.replaceKeyFiles = replaceKeyFiles;
//# sourceMappingURL=tlsHelpers.js.map